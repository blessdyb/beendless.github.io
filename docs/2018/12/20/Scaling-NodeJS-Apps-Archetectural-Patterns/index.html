<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Move Fast, Live Happily, With No End"><title>Scaling NodeJS Apps -- Archtectural Patterns | Beendless ~ 快节奏,慢生活,无止境</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-38171545-1','auto');ga('send','pageview');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.1.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Scaling NodeJS Apps -- Archtectural Patterns</h1><a id="logo" href="/.">Beendless ~ 快节奏,慢生活,无止境</a><p class="description">Move Fast, Live Happily, With No End</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Scaling NodeJS Apps -- Archtectural Patterns</h1><div class="post-meta">2018-12-20<span> | </span><span class="category"><a href="/categories/CS/">CS</a></span></div><div class="post-content"><p>This is the notes when I read the book <a target="_blank" rel="noopener" href="https://www.apress.com/de/book/9781484239902">Scaling Your Nodej.js Apps</a>.</p>
<h2 id="Layered-Architecture"><a href="#Layered-Architecture" class="headerlink" title="Layered Architecture"></a>Layered Architecture</h2><p>It is based on the logistic seperation of concerns of your application (or platform) into layers. And the layers must comply with the following points:</p>
<ul>
<li>Each layer must have a well-defined purpose (presentation layer, business layer, and so on)</li>
<li>Each layer cannot speak (or send data) to any other layer that is not the one directly below it</li>
</ul>
<h2 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h2><p>Many web frameworks have adopted this pattern, because the structure of most web projects resembles this approach. </p>
<ul>
<li>MVP (Model, View, Presenter) pattern aims to remove that unwanted interaction between Model and View, making Presenter the sole man-in-the-middle talking care of passing information between its associated View and it’s Model.</li>
<li>MVVM (Model, View, ViewModel) aims for a two-way data binding between the View and ViewModel. This is in turns allows for automatic updates on the view, based on changes in the model.</li>
</ul>
<h2 id="Client-Server"><a href="#Client-Server" class="headerlink" title="Client-Server"></a>Client-Server</h2><p>It consists of having a powerful server that provides meaningful services to many clients.</p>
<ul>
<li>Clients always start the data communication.</li>
<li>The servers are always listening for new connections from clients to start a new communcation.</li>
</ul>
<h2 id="Master-Slave"><a href="#Master-Slave" class="headerlink" title="Master-Slave"></a>Master-Slave</h2><p>It implies a single channel of communication between two parties. Instead of having one centralized hub for the business logic and heavy processing of data, you have a one-way controlled communication between a controlling node (the master) and many decentralized nodes (the slaves). The heavy processing and expensive tasks are usually performed in the slaves, while the master merely funnels the requests from outside into them. </p>
<ul>
<li>Any behavior-affecting message are one-way, from the master to the slaves. Slaves don’t have the ability to affect the master.</li>
<li>Not all slaves need to work on the same tasks.</li>
<li>Some versions of this partern allow slaves to elect one of their own as a new master, if the current master is no longer working.</li>
</ul>
<p>It can be used for database architecture, increased parallel processing capacity, and so on.</p>
<h2 id="Event-Bus-or-Event-Driven-Architectures"><a href="#Event-Bus-or-Event-Driven-Architectures" class="headerlink" title="Event-Bus or Event-Driven Architectures"></a>Event-Bus or Event-Driven Architectures</h2><p>The relationships between components are usually many-to-many. The components can be defined as follows:</p>
<ul>
<li>Event sources: these are the components that generate events and publish them into the event bus.</li>
<li>Event consumers: the consumers are the components that are expecting a particular set of events and are ready to react to them once received.</li>
<li>Event bus: the channel through which the events will be districuted.</li>
<li>The actual event: the data cummunicated between different components.</li>
</ul>
<p>A classic example of this approach consists of using a message queue as the event bus. There are lots of solutions like RabbitMQ, Kafka, ZeroMQ. The event bus and event-driven reactions are all asynchronous. So you platform must be able to function asynchronously.</p>
<h2 id="Microservices-Architecture"><a href="#Microservices-Architecture" class="headerlink" title="Microservices Architecture"></a>Microservices Architecture</h2><p>The core behind this pattern is your understanding of the different features your platform is supposed to have (that is, the different services it needs to provide). If you properly understand your platform, you can probably split the services into a set of smaller services that, when used together by the client app, yield the same result you would get from a single block of code with all features bundle together. With a microservice-based architecture, we get control of our services in a fine granularity level.</p>
<ul>
<li>Gain total control over which component of your application to scale.</li>
<li>Improve the development process.</li>
<li>Add the ability to switch versions of your components.</li>
<li>Gain the ability to reuse components or modules among applications.</li>
</ul>
<p>Below are some of the most common issues you might run into which developing microservices:</p>
<ul>
<li>Communications between difference micro-services need to be planned and defined carefully and clearly, otherwise, the whole performance of the system will be affected, especially when you get the high traffic.</li>
<li>Too many microservices might create a chaotic architecture.</li>
<li>Deployments of microservices-based architecture can be quite a pain, especially if you are not properly automating the process.</li>
</ul>
<h2 id="The-Broker-Pattern"><a href="#The-Broker-Pattern" class="headerlink" title="The Broker Pattern"></a>The Broker Pattern</h2><p>One of the pain points for the latter was that given a high enough number of microservices, you begin to need a form of orchestration; otherwise, your clients start to lose the ability to communicate easily with your platform.</p>
<p>The purpose of the broken node is to centralize and redistribute requests among different services. Another key characteristic of this pattern is that by default it is not the broken that “knows” about its servers; instead, it’s the servers that register with the borker once they come online, and provide all the information it needs to understand the services they provide.</p>
<p>This pattern has a few setbacks:</p>
<ul>
<li>The broker becomes the single point of failure.</li>
<li>It’s hard to scale your platform unless you also scale up your broker</li>
<li>It adds an extra layer of indirection between client and services; thus extra latency is added to the request time.</li>
</ul>
<h2 id="Lambda-Architectures"><a href="#Lambda-Architectures" class="headerlink" title="Lambda Architectures"></a>Lambda Architectures</h2><p>Lambda architecutres are a special pattern designed to provide a high-throughput platform that is able to process very large quantities of data both in real time and in batches.</p>
<p>This is a solution that has a very high maintenance cost associated with it since you basically are maintaining two parallel architecture at once, which in ture need to keep a centralized repository of data in a synchronized matter.</p>
</div><div class="tags"><a href="/tags/DevOps/"><i class="fa fa-tag"></i>DevOps</a><a href="/tags/NodeJS/"><i class="fa fa-tag"></i>NodeJS</a><a href="/tags/Archetecture/"><i class="fa fa-tag"></i>Archetecture</a></div><div class="post-nav"><a class="pre" href="/2018/12/23/Started-to-go-through-convnetjs/">Started to go through convnetjs</a><a class="next" href="/2018/12/20/Scaling-NodeJS-Apps/">Scaling NodeJS Apps -- The Need to Scale</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://blog.beendless.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CS/">CS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BC%B2%E6%BD%AE%EF%B9%A3%E9%80%80%E6%BD%AE/">漲潮﹣退潮</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%84%A1%E7%9F%A5%EF%B9%A3%E6%97%A0%E7%9F%A5/">無知﹣无知</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%A1%8C%E8%B5%B0%E7%9A%84%E6%A8%B9%E8%8B%97/">行走的樹苗</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/Async/" style="font-size: 15px;">Async</a> <a href="/tags/HTTP/" style="font-size: 15px;">HTTP</a> <a href="/tags/Machine-Learning/" style="font-size: 15px;">Machine Learning</a> <a href="/tags/DevOps/" style="font-size: 15px;">DevOps</a> <a href="/tags/NodeJS/" style="font-size: 15px;">NodeJS</a> <a href="/tags/Archetecture/" style="font-size: 15px;">Archetecture</a> <a href="/tags/Deep-Learning/" style="font-size: 15px;">Deep Learning</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/ConvnetJS/" style="font-size: 15px;">ConvnetJS</a> <a href="/tags/Google-Colab/" style="font-size: 15px;">Google Colab</a> <a href="/tags/CNN/" style="font-size: 15px;">CNN</a> <a href="/tags/Deep-Learning-with-TensorFlow-2-and-Keras/" style="font-size: 15px;">Deep Learning with TensorFlow 2 and Keras</a> <a href="/tags/AWS/" style="font-size: 15px;">AWS</a> <a href="/tags/Functional-Programming/" style="font-size: 15px;">Functional Programming</a> <a href="/tags/Golang/" style="font-size: 15px;">Golang</a> <a href="/tags/Algorithms/" style="font-size: 15px;">Algorithms</a> <a href="/tags/Leetcode/" style="font-size: 15px;">Leetcode</a> <a href="/tags/Binary-Search/" style="font-size: 15px;">Binary Search</a> <a href="/tags/Time-complexity/" style="font-size: 15px;">Time complexity</a> <a href="/tags/Array/" style="font-size: 15px;">Array</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/08/16/Time-Complexity-Calculation-Template/">Time Complexity Calculation Template</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/12/Binary-Search-Deep-Dive/">Binary Search Code Template Deep Dive</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/06/Understand%20Golang's%20Function%20Type/">Understand Golang's Function Type</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/26/JavaScript-Async-Ready-Looping/">JavaScript Async Ready Looping</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/26/Understand-X-Forwarded-Proto/">Understand X-Forwarded-Proto</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/09/Serving%20Files%20on%20S3%20through%20NodeJS/">Serving Files on S3 through NodeJS</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/02/UsePureJSToAddWaterMarkForYourSite/">Add WaterMark with JavaScript to Your Website</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/03/Computer-Vision-Tasks-Summary/">Computer Vision Tasks Summary</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/31/Loading%20Image%20to%20Google%20Colab%20Notebooks/">Loading Image to Google Colab Notebooks</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/03/Building-Asynchronized-HTTP-Services-With-Sanic/">Building Asynchronized HTTP Services With Sanic</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">Beendless ~ 快节奏,慢生活,无止境.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>