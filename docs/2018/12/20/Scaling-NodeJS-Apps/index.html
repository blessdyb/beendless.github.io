<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Scaling NodeJS Apps -- The Need to Scale | Beendless ~ 快节奏,慢生活,无止境</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/normalize.min.css"><link rel="stylesheet" type="text/css" href="/css/pure-min.css"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><script type="text/javascript" src="/js/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-38171545-1','auto');ga('send','pageview');
</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Scaling NodeJS Apps -- The Need to Scale</h1><a id="logo" href="/.">Beendless ~ 快节奏,慢生活,无止境</a><p class="description">Move Fast, Live Happily, With No End</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Scaling NodeJS Apps -- The Need to Scale</h1><div class="post-meta">Dec 20, 2018<span> | </span><span class="category"><a href="/categories/CS/">CS</a></span></div><div class="post-content"><p>This is the notes when I read the book <a href="https://www.apress.com/de/book/9781484239902" target="_blank" rel="noopener">Scaling Your Nodej.js Apps</a>.</p>
<p>An increasing in incoming traffic could affect your system in different ways; we can describe these as direct or indirect.</p>
<ul>
<li><p>Direct Effects</p>
<p>  Overloading your server’s capacity to handle incoming traffic is the most obivous direct effects.</p>
<ul>
<li>Apache Httpd spawns a new process for every request, so multiple concurrent requests might cause this scenario to get out of hand quickly.</li>
<li>Nginx has a non-blocking I/O approach, so it’s capable of managing high levels of traffic with constant memory consumption.</li>
</ul>
</li>
<li><p>Indirect Effects</p>
<p>  An increasing in traffic can affect your application indirectly by overloading one of your internal processes. In a microservices-based architecture, the communication between services needs to be carefully planned. The fact that your’re capable of handling the increased traffic on your user-facing service doesn’t mean the rest of your architecture will be able to handle it. Whenever you depend on third-party services, they can actually assure you that their service will not be degraded by anything.</p>
</li>
<li><p>High Availability</p>
<p>  It must ensure that whatever service it provides will always be available and will not lose performance, despite having internal problems. The availability of a system is known as it’s <code>uptime</code> or <code>SLA</code>(Service Level Agreement) which is measured in nines of availability.<br>  A common way to approach the high HA is to use master/slave design for each node. The monitor service will guarantee that all our nodes are working well. If one of the nodes fails, its slave node would be promoted as the new master node and replace the bad one. It works good if you can simply exchange the master node with slave node without any loss of data or any kind of information. For database nodes, we have to introduce the passive data replication process between maseter nodes and slave nodes. It can make sure at any point if your master gets lot, the slave will take over the responsibility with minimal side-effects (data lose). One thing you need to keep in mind that you can’t prevent the master node goes down during the mid-write process, so we need to enable the data transaction</p>
<ul>
<li>Redis with sentinel enabled, the slaves are not just there waiting to be promoted, they are used for read-only queries as well. So the slaves will take care of all the write operations.</li>
<li>MongoDB has replica sets. It allows us to set a group of nodes with one of them as the primary node     </li>
</ul>
</li>
</ul>
<ul>
<li><p>Fault Tolerance</p>
<p>  High availability is all about keeping the offline time of your platform to a minimum and always trying to keep performance unaffected. The most important difference between these two is that if an error occurs during an action, a high available system does not ensure the correct end state of that action, while a fault-tolerant one does. This distinction is crucial because it will be the key to understanding which approach you will want to implement for your particular use case.</p>
<p>  Usually fault-tolerant systems try to catch the error at its source and find a solution before it becomes critical. </p>
<ul>
<li><p>Redundancy</p>
<p>  We have one or more components performing the same task and some form of checking logic to determine when one of them is has failed and its output needs to be ignored. It’s a very common practice for mission-critical components.</p>
<ul>
<li><p>Triple Modular Redundancy<br>  <code>TMR</code> is a form of redundancy in which three systems perform the same process and their results are checked by a majority voting system that in turn produces a single output.</p>
</li>
<li><p>Forward Error Correction<br>  <code>FEC</code> adds redundancy into the message itself. The receiver can verify the actual data and correct a limited number of detected errors caused by noisy or unstable channels. </p>
</li>
</ul>
</li>
<li><p>Checkingpoint</p>
<p>  This technique consists of saving the current state of the system into reliable storage and restarting the system by preloading that saved state whenever there is a problem.</p>
<p>  For distributed system, when one of nodes recovers from a checkingpoint, the other nodes need to ensure that their current state is consistant. This is a bit complex because there is usually a dependency between nodes, so the solution here is to force the system to return to the only common stable state: its original checkpoint.</p>
</li>
</ul>
</li>
</ul>
</div><div class="tags"><a href="/tags/DevOps/">DevOps</a><a href="/tags/NodeJS/">NodeJS</a><a href="/tags/Archetecture/">Archetecture</a></div><div class="post-nav"><a class="pre" href="/2018/12/20/Scaling-NodeJS-Apps-Archetectural-Patterns/">Scaling NodeJS Apps -- Archtectural Patterns</a><a class="next" href="/2018/12/18/JavaScript-机器学习之分类与聚合算法/">JavaScript 机器学习之分类与聚合算法</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CS/">CS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/漲潮﹣退潮/">漲潮﹣退潮</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/無知﹣无知/">無知﹣无知</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/行走的樹苗/">行走的樹苗</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Machine-Learning/" style="font-size: 15px;">Machine Learning</a> <a href="/tags/DevOps/" style="font-size: 15px;">DevOps</a> <a href="/tags/NodeJS/" style="font-size: 15px;">NodeJS</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/Archetecture/" style="font-size: 15px;">Archetecture</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/12/20/Scaling-NodeJS-Apps-Archetectural-Patterns/">Scaling NodeJS Apps -- Archtectural Patterns</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/20/Scaling-NodeJS-Apps/">Scaling NodeJS Apps -- The Need to Scale</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/18/JavaScript-机器学习之分类与聚合算法/">JavaScript 机器学习之分类与聚合算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/26/Set up SSL for website with Nginx and StartSSL/">Set up SSL for website with Nginx and StartSSL</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/08/13/我的一个夏日清晨，写在天津塘沽码头集装箱爆炸后/">我的一个夏日清晨，写在天津塘沽码头集装箱爆炸后</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/01/05/走进人生的第一个十年/">走进人生的第一个十年</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/10/19/2014年10月19日/">2014年10月19日</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/10/15/飞鸟/">飞鸟</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/09/22/写作，再一个重头开始/">写作，再一个重头开始</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/06/07/写遗嘱之前/">写遗嘱之前</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Beendless ~ 快节奏,慢生活,无止境.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="/js/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>