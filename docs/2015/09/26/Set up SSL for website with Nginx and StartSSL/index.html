<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Set up SSL for website with Nginx and StartSSL | Beendless ~ 快节奏,慢生活,无止境</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.1.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Set up SSL for website with Nginx and StartSSL</h1><a id="logo" href="/.">Beendless ~ 快节奏,慢生活,无止境</a><p class="description">Move Fast, Live Happily, With No End</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Set up SSL for website with Nginx and StartSSL</h1><div class="post-meta">2015-09-26<span> | </span><span class="category"><a href="/categories/CS/">CS</a></span></div><div class="post-content"><p>If you enable HTTPS and set up the certifications correctly, which means data will not be decrypted or modified during the transportation. Today I try to enable SSL to my website. Here is what I did to make it happen: </p>
<p>First, you should make sure your website hosted with a dedicated IP address. Like me buy a VPS from linode. Also you should make sure your HTTP web server support SSL when you set up it. If you are using nginx, just add –with-http_ssl_module when you built it yourself (<a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx/_http/_ssl_module.html">http://nginx.org/en/docs/http/ngx\_http\_ssl_module.html</a>). </p>
<p>Secondly, you need to buy a certification. As we know all modern browsers will check CA, in order to recognized by the root authorities, you need to purchase one certificated through them.  Even you can self-signed one to testing which will show warning to users by browser.  Fortunately, there’re some authorities who supply free CA to users like startssl. It’s easy to get a free CA from them. Just sign up and follow the guidance from startssl, then you can get</p>
<ul>
<li><p>Your private key file  domain.key</p>
</li>
<li><p>Your issued certificate file domain.crt</p>
</li>
<li><p>StartSSL Root CA Certificate and StartSSL Intermediate CA Certificate for your server (ca.pem and sub.class1.server.ca.pem)</p>
</li>
<li><p>Now, you can do the below things to contact the certifications to one:</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat sub.class1.server.ca.pem &gt;&gt; ca.pem</span><br><span class="line"></span><br><span class="line">cat domain.crt ca.pem &gt; server.crt</span><br></pre></td></tr></table></figure>

<ul>
<li>Then, upload your private key and generated certification server.crt to your server.  Open nginx.conf.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># HTTPS server</span><br><span class="line">#</span><br><span class="line">server &#123;</span><br><span class="line">    listen       443 ssl;</span><br><span class="line">    server_name  server name here;</span><br><span class="line"></span><br><span class="line">    ssl_certificate      server.crt;</span><br><span class="line">    ssl\_certificate\_key  domain.key;</span><br><span class="line"></span><br><span class="line">    ssl\_session\_cache shared:SSL:10m;</span><br><span class="line">    ssl\_session\_timeout  5m;</span><br><span class="line">    ssl_ciphers  &quot;EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA RC4 !EXPORT !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS&quot;;</span><br><span class="line">    ssl\_prefer\_server_ciphers   on;</span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line"></span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        root   &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>After that, restart your nginx and revisit your website, you will find your website support HTTPS now. Make sure you open 443 port in your firewall configuration.  If you want to forward all HTTP request to HTTPS, just add the configurations below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       443 ssl;</span><br><span class="line">    listen       80;</span><br><span class="line">    error_page   497  https:&#x2F;&#x2F;$host$uri?$args;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Here is some useful links I followed:</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_ssl_module.html">http://nginx.org/en/docs/http/ngx_http_ssl_module.html</a></li>
<li><a target="_blank" rel="noopener" href="https://www.linode.com/docs/websites/nginx/how-to-install-nginx-and-a-startssl-certificate-on-debian-7-wheezy">https://www.linode.com/docs/websites/nginx/how-to-install-nginx-and-a-startssl-certificate-on-debian-7-wheezy</a></li>
<li><a target="_blank" rel="noopener" href="https://www.ssllabs.com/ssltest/analyze.html">https://www.ssllabs.com/ssltest/analyze.html</a></li>
<li><a target="_blank" rel="noopener" href="https://imququ.com/post/my-nginx-conf-for-security.html">https://imququ.com/post/my-nginx-conf-for-security.html</a></li>
</ul>
</div><div class="tags"><a href="/tags/DevOps/"><i class="fa fa-tag"></i>DevOps</a></div><div class="post-nav"><a class="pre" href="/2018/12/18/JavaScript-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%88%86%E7%B1%BB%E4%B8%8E%E8%81%9A%E5%90%88%E7%AE%97%E6%B3%95/">JavaScript 机器学习之分类与聚合算法</a><a class="next" href="/2015/08/13/%E6%88%91%E7%9A%84%E4%B8%80%E4%B8%AA%E5%A4%8F%E6%97%A5%E6%B8%85%E6%99%A8%EF%BC%8C%E5%86%99%E5%9C%A8%E5%A4%A9%E6%B4%A5%E5%A1%98%E6%B2%BD%E7%A0%81%E5%A4%B4%E9%9B%86%E8%A3%85%E7%AE%B1%E7%88%86%E7%82%B8%E5%90%8E/">我的一个夏日清晨，写在天津塘沽码头集装箱爆炸后</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://blog.beendless.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CS/">CS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BC%B2%E6%BD%AE%EF%B9%A3%E9%80%80%E6%BD%AE/">漲潮﹣退潮</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%84%A1%E7%9F%A5%EF%B9%A3%E6%97%A0%E7%9F%A5/">無知﹣无知</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%A1%8C%E8%B5%B0%E7%9A%84%E6%A8%B9%E8%8B%97/">行走的樹苗</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/Async/" style="font-size: 15px;">Async</a> <a href="/tags/HTTP/" style="font-size: 15px;">HTTP</a> <a href="/tags/Machine-Learning/" style="font-size: 15px;">Machine Learning</a> <a href="/tags/DevOps/" style="font-size: 15px;">DevOps</a> <a href="/tags/NodeJS/" style="font-size: 15px;">NodeJS</a> <a href="/tags/Archetecture/" style="font-size: 15px;">Archetecture</a> <a href="/tags/Deep-Learning/" style="font-size: 15px;">Deep Learning</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/ConvnetJS/" style="font-size: 15px;">ConvnetJS</a> <a href="/tags/Google-Colab/" style="font-size: 15px;">Google Colab</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/08/31/Loading%20Image%20to%20Google%20Colab%20Notebooks/">Loading Image to Google Colab Notebooks</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/03/Building-Asynchronized-HTTP-Services-With-Sanic/">Building Asynchronized HTTP Services With Sanic</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/01/Several-Important-Concetps-of-CNN/">Several Important Concepts of CNN</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/01/Tips-for-Hyperparameter-Optimization/">Tips for Hyperparameter Optimization</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/23/Started-to-go-through-convnetjs/">Started to go through convnetjs</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/20/Scaling-NodeJS-Apps-Archetectural-Patterns/">Scaling NodeJS Apps -- Archtectural Patterns</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/20/Scaling-NodeJS-Apps/">Scaling NodeJS Apps -- The Need to Scale</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/18/JavaScript-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%88%86%E7%B1%BB%E4%B8%8E%E8%81%9A%E5%90%88%E7%AE%97%E6%B3%95/">JavaScript 机器学习之分类与聚合算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/26/Set%20up%20SSL%20for%20website%20with%20Nginx%20and%20StartSSL/">Set up SSL for website with Nginx and StartSSL</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/08/13/%E6%88%91%E7%9A%84%E4%B8%80%E4%B8%AA%E5%A4%8F%E6%97%A5%E6%B8%85%E6%99%A8%EF%BC%8C%E5%86%99%E5%9C%A8%E5%A4%A9%E6%B4%A5%E5%A1%98%E6%B2%BD%E7%A0%81%E5%A4%B4%E9%9B%86%E8%A3%85%E7%AE%B1%E7%88%86%E7%82%B8%E5%90%8E/">我的一个夏日清晨，写在天津塘沽码头集装箱爆炸后</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">Beendless ~ 快节奏,慢生活,无止境.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>